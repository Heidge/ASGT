{% extends 'tournaments/base.html' %}
{% load static %}

{% block content %}
  <h1 class="d-flex justify-content-center mb-4">{{ tournament.tournament_name|escape }}</h1>
  <div class="container d-flex justify-content-center card" style="width: 50%;">
    <img src="{{ game.game_image.url|escape }}" alt="{{ tournament.game_name|escape }}" class="card-img-top mx-auto" style="width: 200px; height: 200px">
    <div class="card-body p-0">
    <ul class="container">
      <ul class="container list-group list-group-flush">
        <li class="list-group-item"><strong>Jeu :</strong> {{ tournament.game|escape }}</li>
        <li class="list-group-item"><strong>Propriétaire : </strong>{{ tournament.admin|escape }}</li>
        <li class="list-group-item"><strong>Nombre de participants : </strong>{{ tournament.nb_players|escape }}</li>
        <li class="list-group-item"><strong>Joueurs : </strong>
            {{ tournament.player1|escape }} - {{ tournament.player2|escape }} - {{ tournament.player3|escape }} -
            {{ tournament.player4|escape }} - {{ tournament.player5|escape }} - {{ tournament.player6|escape }} -
            {{ tournament.player7|escape }} - {{ tournament.player8|escape }}
        </li>
        <li class="list-group-item"><strong>Date de début : </strong>{{ tournament.start_date|escape }}</li>
        <li class="list-group-item"><strong>Heure de début : </strong>{{ tournament.start_time|escape }}</li>
      </ul>
    </ul>
  </div>
  <div class="container d-flex justify-content-around my-4">
    <button type="button" class="btn-update btn btn-primary"><a class="btn-link"
        href="{% url 'tournament-update' tournament.id %}">Modifier</a></button>
    <button type="button" class="btn-update btn btn-primary"><a class="btn-link"
        href="{% url 'tournament-delete' tournament.id %}">Supprimer</a></button>
  </div>
</div>

<div class="container mt-5">
  <div class="row mt-4">
    <div class="col text-center">
      <form action="" method="post" novalidate>
      <h2><u>ROUND 1</u></h2>
      <div class="d-flex justify-content-center">
          <ul class="p-0">
            <div class="my-4">
              
              {% csrf_token %}
              <li class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m1-p1" for="r1-m1-p1"><strong>{{ round1.player1 }}</strong></label>
                {% if round1.player1_score %}
                  {{ round1.player1_score }}
                {% else %} 
                  {{ round1_form.player1_score }}
                {% endif %} 
              </li>
              <li class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m1-p2" for="r1-m1-p1"><strong>{{ round1.player2 }}</strong></label>
                {% if round1.player2_score %}
                  {{ round1.player2_score }}
                {% else %} 
                  {{ round1_form.player2_score }}
                {% endif %}            
              </li>
            </div>
            <div class="my-4">
              <li
                class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m2-p3" for="r1-m1-p1"><strong>{{ round1.player3 }}</strong></label>
                {% if round1.player3_score %}
                  {{ round1.player3_score }}
                {% else %} 
                  {{ round1_form.player3_score }}
                {% endif %}          
              </li>
              <li class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m2-p4" for="r1-m1-p1"><strong>{{ round1.player4 }}</strong></label>
                {% if round1.player4_score %}
                  {{ round1.player4_score }}
                {% else %} 
                  {{ round1_form.player4_score }}
                {% endif %}       
              </li>
            </div class="my-4">
            <div>
              <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m3-p5" for="r1-m1-p1"><strong>{{ round1.player5 }}</strong></label>
                {% if round1.player5_score %}
                  {{ round1.player5_score }}
                {% else %} 
                  {{ round1_form.player5_score }}
                {% endif %}          
              </li>
              <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m3-p6" for="r1-m1-p1"><strong>{{ round1.player6 }}</strong></label>
                {% if round1.player6_score %}
                  {{ round1.player6_score }}
                {% else %} 
                  {{ round1_form.player6_score }}
                {% endif %}         
              </li>
            </div>
            <div class="my-4">
              <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m4-p7" for="r1-m1-p1"><strong>{{ round1.player7 }}</strong></label>
                {% if round1.player7_score %}
                  {{ round1.player7_score }}
                {% else %} 
                  {{ round1_form.player7_score }}
                {% endif %}    
              </li>
              <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
                <label class="ps-4" id="player-r1-m4-p8" for="r1-m1-p1"><strong>{{ round1.player8 }}</strong></label>
                {% if round1.player8_score %}
                  {{ round1.player8_score }}
                {% else %} 
                  {{ round1_form.player8_score }}
                {% endif %} 
              </li>
            </div>
          </ul>
      </div>
      <input type="submit" class="btn btn-primary" value="Verrouiller le round">
      </form> 
    </div>
    <div class="col text-center">
      <h2><u>DEMI-FINALES</u></h2>
      <div class="d-flex justify-content-center">
        <ul class="p-0">
          <div class="round2-m1-margin">
            <li class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
              <strong><label class="ps-4" id="player-r2-m1-p1"></label></strong>
              <input class="w-25 tb-input" id="score-r2-m1-p1" type="number" name="score" value="{{ score.player1 }}">
            </li>
            <li class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
              <strong><label class="ps-4" id="player-r2-m1-p2"></label></strong>
              <input class="w-25 tb-input" id="score-r2-m1-p2" type="number" name="score" value="{{ score.player1 }}">
            </li>
          </div>
          <div class="round2-m2-margin">
            <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
              <strong><label class="ps-4" id="player-r2-m2-p3"></label></strong>
              <input class="w-25 bb-input" id="score-r2-m2-p3" type="number" name="score" value="{{ score.player3 }}">
            </li>
            <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
              <strong><label class="ps-4" id="player-r2-m2-p4"></label></strong>
              <input class="w-25 bb-input" id="score-r2-m2-p4" type="number" name="score" value="{{ score.player4 }}">
            </li>
          </div>
        </ul>
      </div>
      <input type="submit" class="btn btn-primary btn-round-2" onclick="DefinePlayersFinale()" value="Verrouiller le round">
    </div>
    <div class="col text-center">
      <h2><u>FINALE</u></h2>
      <div class="d-flex justify-content-center">
      <ul class="p-0">
        <div class="finale-margin">
          <li class="d-flex justify-content-between player tb text-decoration-none border border-3 rounded-3 m-2 width-li">
            <strong><label class="ps-4" id="player-r3-m1-p1"></label></strong>
            <input class="w-25 tb-input" id="score-r3-m1-p1" type="number" name="score" value="{{ score.player1 }}">
          </li>
          <li class="d-flex justify-content-between player bb text-decoration-none border border-3 rounded-3 m-2 width-li">
            <strong><label class="ps-4" id="player-r3-m1-p2"></label></strong>
            <input class="w-25 bb-input" id="score-r3-m1-p2" type="number" name="score" value="{{ score.player1 }}">
          </li>
        </div>
      </ul>
    </div>
    <input type="submit" class="btn btn-primary btn-round-finale" onclick="DefineWinner()" value="Verrouiller le round">
    </div>
  </div>
  <div class="winner-display mt-5" id="winner-display" style="display:none;">
    <img src="{% static 'tournaments/images/Crown - Logo.png' %}" alt="winner">
    <h3 id="winner-name"></h3>
  </div>
</div>
<div class="container mt-3">
  <button type="button" class="btn-return-tournament btn btn-primary mt-5"><a class="btn-link"
      href="{% url 'tournament-list' %}">Liste des tournois</a></button>
</div>
{% endblock %}
